<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<title>[[${websiteTitleName}]]</title>
<meta name="keywords" content="Spider">
<meta name="description" content="RZSpider">
<link href="../static/css/bootstrap.min.css"
	th:href="@{css/bootstrap.min.css}" rel="stylesheet" />
<link href="../static/css/font-awesome.css"
	th:href="@{css/font-awesome.css}" rel="stylesheet" />
<link href="../static/css/style.css" th:href="@{css/style.css}"
	rel="stylesheet" />
<link href="../static/css/login.min.css" th:href="@{css/login.min.css}"
	rel="stylesheet" />
<link href="../static/ajax/libs/iCheck/custom.css"
	th:href="@{/ajax/libs/iCheck/custom.css}" rel="stylesheet" />

<link rel="shortcut icon" th:href="${websiteIco}" />
<script>
        if(window.top!==window.self){window.top.location=window.location};
    </script>
<style type="text/css">
spider {
	width: 50;
	height: 70
}

body.signin {
	height: auto;
	background: no-repeat center fixed;
	-webkit-background-size: cover;
	-moz-background-size: cover;
	-o-background-size: cover;
	background-size: cover;
	color: rgba(255, 255, 255, .95)
}
</style>
</head>
<body class="signin" id="signin">
	<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"
		style="font-size: 18px;">
		<!--  
		<ul class="nav navbar-nav navbar-right">
			<li><a href="/rzblog" >博客</a></li>
			<li><a href="/toolbox" >工具箱</a></li>
		</ul>-->
	</div>
	<div class="signinpanel">
		<div class="row">
			<!--   <div class="col-sm-5">
                <div class="signin-info">
                    <div class="logopanel m-b">
                        <h1><img alt="[ Spider ]" src="../static/Spider.png" th:src="@{Spider.png}"></h1>
                    </div>
                    <div class="m-b"></div>
                    <h4>欢迎使用 <strong>Spider</strong></h4>
                    <ul class="m-b">
                        <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> SpringBoot</li>
                        <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> Mybatis</li>
                        <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> Shiro</li>
                        <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> Thymeleaf</li>
                        <li><i class="fa fa-arrow-circle-o-right m-r-xs"></i> Bootstrap</li>
                    </ul>
                    <strong>还没有账号？ <a href="#">立即注册&raquo;</a></strong>
                </div>
            </div> -->
			<!-- 特效区域 -->
			<div class="specialEffects" style="display: none">
				<canvas id="specialEffects"></canvas>
			</div>
			<div class="specialEffects2" style="display: none">
				<div id="specialEffects2"></div>
			</div>
			<!-- 特效区域 -->
			<div class="login">
				<!-- 				 <h1 align="center"><img src="../static/spider.png" th:src="@{spider.png}" alt="" width="100px"></h1>
 -->
				<!--  <h1 align="center">欢迎使用Spider</h1> -->
				<input id="loginbgName" name="loginbgName" type="hidden"
					th:value="${loginbgName}"></input> 
					
				<input id="loginbgType"
					name="loginbgType" type="hidden" th:value="${loginbgType}"></input>
					
				<form id="signupForm">
					<h1 align="center" class="m-t-md">欢迎使用[[${websiteTitleName}]]</h1>
					
					<input type="text" name="username" class="form-control uname"
						placeholder="用户名" value="" />
						
				 	<input type="password"
						name="password" class="form-control pword m-b" placeholder="密码"
						value="" />
						
						
					<div class="row" th:if="${captchaEbabled==true}">
						<div class="col-xs-6">
							<input type="text" name="validateCode" class="form-control code"
								placeholder="验证码" maxlength="5">
						</div>
						<div class="col-xs-6">
							<a href="javascript:void(0);" title="点击更换验证码"> <img
								th:src="@{captcha/captchaImage(type=${captchaType})}"
								class="imgcode" width="85%" />
							</a>
						</div>
					</div>
					<input class="i-checks" type="checkbox" name="rememberme" />&nbsp;&nbsp;记住我
					<button class="btn btn-success btn-block">登录</button>
				</form>
			</div>
		</div>
		<div class="signup-footer">
			<div class="pull-left" id="websiteCopyrightInformation"></div>
		</div>
	</div>
	
	<script th:inline="javascript"> var ctx = [[@{/}]]; var captchaType = [[${captchaType}]]; </script>
	
	<!-- 全局js -->
	<script type="text/javascript" color="255,0,0" opacity='1' zIndex="-2"
		count="100" src="../static/js/canvas-nest.js"
		th:src="@{/js/canvas-nest.js}"></script>
		
	<script src="../static/js/jquery.min.js" th:src="@{js/jquery.min.js}"></script>
	<script src="../static/js/bootstrap.min.js"
		th:src="@{js/bootstrap.min.js}"></script>
		
	<!-- 验证插件 -->
	<script src="../static/ajax/libs/validate/jquery.validate.min.js"
		th:src="@{ajax/libs/validate/jquery.validate.min.js}"></script>
	<script src="../static/ajax/libs/validate/messages_zh.min.js"
		th:src="@{ajax/libs/validate/messages_zh.min.js}"></script>
	<script src="../static/ajax/libs/layer/layer.min.js"
		th:src="@{ajax/libs/layer/layer.min.js}"></script>
	<script src="../static/ajax/libs/iCheck/icheck.min.js"
		th:src="@{/ajax/libs/iCheck/icheck.min.js}"></script>
	
	<!-- 特效 -->
	<!-- 特效 -->

	<!-- 背景设置等等 -->
	<script src="../static/rzspider/otherlogin.js"
		th:src="@{/rzspider/otherlogin.js}"></script>
	<script th:inline="javascript">
		var websiteCopyrightInformation=[[${websiteCopyrightInformation}]];
		if(websiteCopyrightInformation==null||websiteCopyrightInformation==''){
			websiteCopyrightInformation='Copyright©2018 Powered by <a href="https://github.com/ricozhou/RZSpider2.0" >RZSpider</a><a href="http://www.miitbeian.gov.cn/" > 苏ICP备18054899号-1';
		}
		// 添加
		document.getElementById('websiteCopyrightInformation').insertAdjacentHTML(
				'afterBegin', websiteCopyrightInformation)
				
				
				
				
				
		$(function() {
		    validateRule();
		    $(".i-checks").iCheck({checkboxClass:"icheckbox_square-green-login"});
			$('.imgcode').click(function() {
				var url = ctx + "captcha/captchaImage?type=" + captchaType + "&s=" + Math.random();
				$(".imgcode").attr("src", url);
			});
		});
		
		$.validator.setDefaults({
		    submitHandler: function() {
		        login();
		    }
		});
		
		function login() {
		
			var username = $("input[name='username']").val().trim();
		    var password = $("input[name='password']").val().trim();
		    var validateCode = $("input[name='validateCode']").val();
		    var rememberMe = $("input[name='rememberme']").is(':checked');
		    $.ajax({
		        type: "POST",
		        url: ctx + "login",
		        data: {
		            "username": username,
		            "password": password,
		            "validateCode" : validateCode,
		            "rememberMe": rememberMe
		        },
		        success: function(r) {
		            if (r.code == 0) {
		                parent.location.href = ctx + 'index';
		            } else {
		            	$('.imgcode').click();
		                layer.msg(r.msg);
		            }
		        }
		    });
		}
		
		function validateRule() {
		    var icon = "<i class='fa fa-times-circle'></i> ";
		    $("#signupForm").validate({
		        rules: {
		            username: {
		                required: true
		            },
		            password: {
		                required: true
		            }
		        },
		        messages: {
		            username: {
		                required: icon + "请输入您的用户名",
		            },
		            password: {
		                required: icon + "请输入您的密码",
		            }
		        }
		    })
		}		
	</script>
</body>
</html>
